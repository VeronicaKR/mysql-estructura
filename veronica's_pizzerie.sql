DROP DATABASE IF EXISTS veronicaspizzerie;
CREATE DATABASE veronicaspizzerie;
USE veronicaspizzerie;
CREATE TABLE CLIENT(
    ID_CLIENT INT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY(ID_CLIENT),
    NOMBRE VARCHAR(20) NOT NULL,
    APELLIDO VARCHAR(20) NOT NULL,
    DIRECCION VARCHAR(20),
    CP INT(5),
    TELEFONO INT(9)
    );

CREATE TABLE PROVINCIA(
    ID_PROVINCIA INT NOT NULL,
    PRIMARY KEY (ID_PROVINCIA),
    NOM VARCHAR(10)
   );
CREATE TABLE LOCALITAT(
    ID_LOCALITAT INT NOT NULL,
    PRIMARY KEY (ID_LOCALITAT),
    NOM VARCHAR(10),
    ID_CLIENT INT,
    FOREIGN KEY (ID_CLIENT) REFERENCES CLIENT (ID_CLIENT),
    ID_PROVINCIA INT NOT NULL,
    FOREIGN KEY (ID_PROVINCIA) REFERENCES PROVINCIA (ID_PROVINCIA)
);
CREATE TABLE EMPLEAT(
    ID_EMPLEAT INT NOT NULL,
    PRIMARY KEY (ID_EMPLEAT),
    NOM VARCHAR (10),
    COGNOM VARCHAR (10),
    NIF VARCHAR (9),
    TELEFON INT (9),
    CUINER_REPARTIDOR VARCHAR (10)
);

CREATE TABLE PRODUCTOS(
    ID_PRODUCTO INT (5) NOT NULL,
    PRIMARY KEY(ID_PRODUCTO),
    TIPO_PRODUCTO VARCHAR (15)
  );
CREATE TABLE COMANDA(
    TIPO_PRODUCTO INT(20) NOT NULL,
    ID_COMANDA INT(10) NOT NULL,
    FECHA_Y_HORA DATETIME,
    ENTREGA_O_RECOGER VARCHAR(15),
    CANTIDAD_PRODUCTOS VARCHAR(20),
    PRECIO_UNIDAD INT (100),
    ID_CLIENT INT,
    FOREIGN KEY (ID_CLIENT) REFERENCES CLIENT (ID_CLIENT),
    ID_EMPLEAT INT NOT NULL,
    FOREIGN KEY (ID_EMPLEAT) REFERENCES EMPLEAT (ID_EMPLEAT),
    PRECIO_TOTAL INT(200) NULL
);


CREATE TABLE CATEGORIA_PIZZAS(
    ID_CATEGORIA_PIZZAS INT (20) NOT NULL,
    PRIMARY KEY (ID_CATEGORIA_PIZZAS),
    NOM VARCHAR (20) 
);
CREATE TABLE PIZZAS(
    ID_PIZZA VARCHAR(20),
    PRIMARY KEY(ID_PIZZA),
    ID_PRODUCTO INT,
    FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTOS (ID_PRODUCTO),
    NOM VARCHAR(10),
    DESCRIPCIO VARCHAR(50),
    IMATGE LONGBLOB NULL,
    PREU INT(10),
    TIPO_PRODUCTO INT(20) NOT NULL,
    ID_CATEGORIA_PIZZAS INT (10) NOT NULL,
    FOREIGN KEY (ID_CATEGORIA_PIZZAS) REFERENCES CATEGORIA_PIZZAS (ID_CATEGORIA_PIZZAS) 
);

CREATE TABLE HAMBURGUESAS(
    ID_HAMBURGUESA VARCHAR(20),
    PRIMARY KEY(ID_HAMBURGUESA),
    ID_PRODUCTO INT,
    FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTOS (ID_PRODUCTO),
    NOM VARCHAR(10),
    DESCRIPCIO VARCHAR(50),
    IMATGE LONGBLOB NULL,
    PREU INT(10),
    TIPO_PRODUCTO INT(20) NOT NULL   
);
CREATE TABLE BEBIDAS(
    ID_BEBIDA VARCHAR(20),
    PRIMARY KEY(ID_BEBIDA),
     ID_PRODUCTO INT,
    FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTOS (ID_PRODUCTO),
    NOM VARCHAR(10),
    DESCRIPCIO VARCHAR(50),
    IMATGE LONGBLOB NULL,
    PREU INT(3),
    TIPO_PRODUCTO INT(20) NOT NULL
);

CREATE TABLE BOTIGA(
    ID_BOTIGA INT NOT NULL AUTO_INCREMENT,
    PRIMARY KEY (ID_BOTIGA),
    ID_EMPLEAT INT NOT NULL ,
    FOREIGN KEY(ID_EMPLEAT) REFERENCES EMPLEAT (ID_EMPLEAT),
    ADREÇA VARCHAR(20),
    CP INT(5),
    ID_LOCALITAT INT (10),
    FOREIGN KEY (ID_LOCALITAT) REFERENCES LOCALITAT (ID_LOCALITAT),
    ID_PROVINCIA INT (10),
    FOREIGN KEY (ID_PROVINCIA) REFERENCES PROVINCIA (ID_PROVINCIA)
);

INSERT INTO CLIENT (NOMBRE,APELLIDO,DIRECCION,CP,TELEFONO)
VALUES ('CLIENTE1', 'APELLIDO1', 'CALLE 1', '43700','977777777'),
('CLIENTE2', 'APELLIDO2', 'CALLE 2', '43700','977777777'),
('CLIENTE3', 'APELLIDO3', 'CALLE 3', '43701','977777777'),
('CLIENTE4', 'APELLIDO4', 'CALLE 4', '43701','977777777'),
('CLIENTE5', 'APELLIDO5', 'CALLE 5', '43702','977777777');

INSERT INTO PROVINCIA (ID_PROVINCIA,NOM)
VALUES ('1','TARRAGONA'),
('2','BARCELONA');
INSERT INTO LOCALITAT (ID_LOCALITAT,NOM,ID_CLIENT,ID_PROVINCIA)
VALUES ('1','CALAFELL','1','1'),
('2','CUNIT','2','2'),
('3','RODA','3','1'),
('4','COMARRUGA','4','1'),
('5','VILANOVA','5','2');



INSERT INTO EMPLEAT (ID_EMPLEAT,NOM,COGNOM,NIF,TELEFON,CUINER_REPARTIDOR)
VALUES ('1','LUIS','COG','88888888D', '977777777','CUINER'),
('2','LUISA','COG','88888888D', '977777777','REPARTIDOR'),
('3','CARLOS','COG','88888888D', '977777777','REPARTIDOR'),
('4','VERONICA','COG','88888888D', '977777777','CUINER');

INSERT INTO PRODUCTOS (ID_PRODUCTO,TIPO_PRODUCTO)
VALUES ('1','PIZZA'),
('2','HAMBURGUESA'),
('3','BEBIDA');
INSERT INTO COMANDA (TIPO_PRODUCTO,ID_COMANDA,FECHA_Y_HORA,ENTREGA_O_RECOGER,CANTIDAD_PRODUCTOS,PRECIO_UNIDAD,ID_CLIENT,ID_EMPLEAT,PRECIO_TOTAL)
VALUES ('1','1','2022-06-02 10:43:43','ENTREGA','2','20','1','2','40'),
('3','1','2022-06-02 10:43:43','ENTREGA','1','20','1','2','60'), 
('2','2','2022-06-02 10:43:43','ENTREGA','2','20','3','2','40'),
('1','2','2022-06-02 10:43:43','ENTREGA','1','20','3','2','60'),
('1','3','2022-06-02 10:43:43','RECOGER','1','20','2','1','20'),
('2','4','2022-06-02 10:43:43','ENTREGA','3','20','3','3','60');

INSERT INTO CATEGORIA_PIZZAS (ID_CATEGORIA_PIZZAS,NOM)
VALUES ('1','PIZZAS FACILES'),
('2','PIZZAS DIFICILES');

INSERT INTO PIZZAS(ID_PIZZA,ID_PRODUCTO,NOM,DESCRIPCIO,IMATGE,PREU,TIPO_PRODUCTO,ID_CATEGORIA_PIZZAS)
VALUES ('1','1','MARGARITA','TOMATE Y QUESO', 'NULL','20', '1','1'),
('2','1','PROSCUITO','TOMATE, QUESO,JAMON DULCE', 'NULL','20', '1','2'),
('3','1','CARBONARA','NATA,BEICON Y QUESO', 'NULL','20', '1','1'),
('4','1','HAWAIANA','TOMATE Y PIÑA', 'NULL','20', '1','2');

INSERT INTO HAMBURGUESAS(ID_HAMBURGUESA,ID_PRODUCTO,NOM,DESCRIPCIO,IMATGE,PREU,TIPO_PRODUCTO)
VALUES('1','2','PEQUE','PAN,TOMATE,HAMBURGUESA','NULL','20','2'),
('2','2','MEDIANA','PAN,TOMATE,QUESO,HAMBURGUESA','NULL','20','2'),
('3','2','COMPLETA','PAN,TOMATE,,LECHUGA,QUESO,HAMBURGUESA','NULL','20','2');

INSERT INTO BEBIDAS (ID_BEBIDA,ID_PRODUCTO,NOM,DESCRIPCIO,IMATGE,PREU,TIPO_PRODUCTO)
VALUES('1','3','COCA-COLA','BEBIDA CON GAS','NULL','5','3'),
('2','3','FANTA','BEBIDA CON GAS','NULL','5','3'),
('3','3','AQUARIUS','BEBIDA SIN GAS','NULL','5','3');

INSERT INTO BOTIGA(ID_EMPLEAT,ADREÇA,CP,ID_LOCALITAT,ID_PROVINCIA)
VALUES('1','C/VENTURA','43820','1','1'),
('2','C/BORONAT','43800','4','1'),
('3','AV/TRINITAT','08080','2','2'),
('3','AV/MARQUES','08080','3','2');

SELECT COMANDA.TIPO_PRODUCTO,LOCALITAT.ID_LOCALITAT FROM COMANDA INNER JOIN LOCALITAT ON LOCALITAT.ID_CLIENT=1 WHERE TIPO_PRODUCTO=3;

SELECT * FROM COMANDA WHERE ID_EMPLEAT=2;